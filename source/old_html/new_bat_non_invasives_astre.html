<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Projet EBO-SURSY</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="robots" content="all,follow">
        
    <!-- Bootstrap CSS-->
    <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css">
    <!-- Font Awesome CSS-->
    <link rel="stylesheet" href="vendor/font-awesome/css/font-awesome.min.css">
    <!-- Fontastic Custom icon font-->
    <link rel="stylesheet" href="css/fontastic.css">
    <!-- Google fonts - Poppins -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,700">
    <!-- Ladda-->
    <link rel="stylesheet" href="vendor/ladda/ladda-themeless.min.css">
    
    <!-- theme stylesheet-->
    <link rel="stylesheet" href="css/style.default.premium.css" id="theme-stylesheet">
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" href="css/custom.css">
    <!-- Favicon-->
    <link rel="shortcut icon" href="img/favicon.ico">    
    <!-- Tweaks for older IEs--><!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
        
    <script src="vendor/jquery/jquery.min.js" onload="window.$ = window.jQuery = module.exports;"></script>
	<script>
		delete window.module;
	</script>
    
    <!-- DataTables CSS-->
    <link rel="stylesheet" href="css/dataTables.bootstrap4.css">
    <link rel="stylesheet" href="css/responsive.bootstrap4.min.css">
        
    <link rel="stylesheet" href="css/icone.css">
    
    <link rel="stylesheet" href="css/offline_online.css">    
    
    <script src="vendor/popper.js/umd/popper.min.js"> </script>
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
    <script src="vendor/jquery.cookie/jquery.cookie.js"> </script>
    <script src="vendor/chart.js/Chart.min.js"></script>
    <script src="vendor/jquery-validation/jquery.validate.min.js"></script>
    <!-- <script src="js/charts-home.js"></script> -->
    <!-- Notifications-->
    <script src="vendor/messenger-hubspot/build/js/messenger.min.js"></script>
    <script src="vendor/messenger-hubspot/build/js/messenger-theme-flat.js"></script>
    <!-- <script src="js/home-premium.js"> </script> -->
    
    <!-- Bootstrap DatePicker-->
    <script src="vendor/bootstrap-datepicker/js/bootstrap-datepicker.min.js"></script>
    <script src="vendor/bootstrap-datepicker/locales/bootstrap-datepicker.fr.min.js" charset="UTF-8"></script>
    
    <!-- Data Tables-->
    <script src="vendor/datatables.net/js/jquery.dataTables.js"></script>
    <script src="vendor/datatables.net-bs4/js/dataTables.bootstrap4.js"></script>
    <script src="vendor/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
    <script src="vendor/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js"></script>
    <script src="js/tables-datatable.js"></script>
    
    <!-- Forms init-->
    <!-- <script src="js/forms-advanced.js"></script>-->
    
    <!-- Main File-->
    <script src="js/front.js"></script>
    
    <!-- Loading buttons-->
    <script src="vendor/ladda/spin.min.js"></script>
    <script src="vendor/ladda/ladda.min.js"></script>
    <script src="js/components-ladda.js"></script>
    
    <script src="js/pouchdb.authentication.js"></script> 
    <script src="js/pouchdb-6.4.2.min.js"></script> 
    <script src="js/pouchdb.find.js"></script> 
    
    <script src="js/function.js"></script>
    <script src="js/menu.js"></script>
    
    <script src="js/loadjs.js"></script>
    
    <script src="js/uuid.js"></script>
    
    <script src="js/load-page.js"></script> 
    
    <script src="js/addReference.js"></script>  
    
  </head>
  <body onload="loaded_bat_non_invasives('chauves_souris_non_invasives_astre')">
  
    <script>
		logged_only();
		var clickedBtn = null;
		//loadjs('js/menu_rights.js');
		var debug;
		if (localStorage.getItem('debug') === null) {
			debug = '';
		} else {
			debug = localStorage.getItem('debug');
		};
		var html = 'non_invasives';
	</script> 
  
    <!-- <script type="text/javascript">
    	showAlertFlash();
    </script> -->	    
        
    <div class="page">
      <!-- Main Navbar-->
      <header class="header">
        <nav class="navbar">
          <div class="container-fluid">
            <div class="navbar-holder d-flex align-items-center justify-content-between">
              <!-- Navbar Header-->
              <div class="navbar-header">
                <!-- Navbar Brand --><a href="main.html" class="navbar-brand d-none d-sm-inline-block">
                  <div class="brand-text d-none d-lg-inline-block"><span>Projet</span><strong>EBO-SURSY</strong></div>
                  <div class="brand-text d-none d-sm-inline-block d-lg-none"><strong>ES</strong></div></a>
                <!-- Toggle Button--><a id="toggle-btn" href="#" class="menu-btn active"><span></span><span></span><span></span></a>
              </div>
              <!-- Navbar Menu -->
              <ul class="nav-menu list-unstyled d-flex flex-md-row align-items-md-center">
                
                <li class="nav-item d-flex align-items-center">
                  <div class="led-box">
	    		    <div id="led"></div>
	    		    <p id="p_led"></p>
	    		  </div>
	            </li>
	                            
                <!-- Logout    -->
                <li class="nav-item"><a href="logout.html" class="nav-link logout">Se déconnecter<i class="fa fa-sign-out"></i></a></li>
              </ul>
            </div>
          </div>
        </nav>
      </header>
      <div class="page-content d-flex align-items-stretch"> 
        <!-- Side Navbar -->
        <nav class="side-navbar">
          <!-- Sidebar Header-->
          <div class="sidebar-header d-flex align-items-center">
            <img src="logos/Logo_1lign-eboSURSY_coul.jpg" class="img-fluid">
          </div>
          <!-- Sidebar Navidation Menus--><span class="heading">MENU</span>
          <ul class="list-unstyled">
                    
                    <li id="li_dashboard" name="10"> <a href="main.html"> <i class="a-logo-tableau-de-bord"></i></a></li>
                                        
                    <li id="li_transvihmiDropdown" name="1"> <a id="a_transvihmiDropdown" name="1" href="#ul_transvihmiDropdown" aria-expanded="false" data-toggle="collapse"> <i class="a-logo-ird"></i> </a>
                      <ul id="ul_transvihmiDropdown" name="1" class="collapse list-unstyled">
                        
                        <li id="li_site_transvihmi" name="1" style="text-align: right"><a href="site_transvihmi.html">Site</a></li>                            
		                                        
                        <li id="li_batTransvihmiDropdown" name="1"><a id="a_batTransvihmiDropdown" name="1" href="#ul_batTransvihmiDropdown" aria-expanded="false" data-toggle="collapse" style="text-decoration:underline"> <i class="icon-Chauve-souris_Black2"></i>Chauve-souris</a>
                          <ul id="ul_batTransvihmiDropdown" name="1" class="collapse list-unstyled">
		                    
		                    <li id="li_suivi_longitudinal_donnees_missions_transvihmi" name="1"style="text-align: right"><a href="suivi_longitudinal_donnees_missions_transvihmi.html">Suivi longitudinal - données missions</a></li>
		                    <li id="li_suivi_longitudinal_donnees_journalieres_transvihmi" name="1"style="text-align: right"><a href="suivi_longitudinal_donnees_journalieres_transvihmi.html">Suivi longitudinal - données journalières</a></li>                            
                        		                    
		                    <li id="li_batTransvihmiCaptureesDropdown" name="1"><a id="a_batTransvihmiCaptureesDropdown" name="1" href="#ul_batTransvihmiCaptureesDropdown" aria-expanded="false" data-toggle="collapse"><i class="icon-capturee"></i>Capturées</a>
		                      <ul id="ul_batTransvihmiCaptureesDropdown" name="1" class="collapse list-unstyled">
		                        <li id="li_bat_capturees_transvihmi" name="1"><a href="bat_capturees_transvihmi.html">données</a></li>                            
		                        <li id="li_bat_map_capturees_transvihmi" name="1"><a href="bat_map_capturees_transvihmi.html">carte</a></li>
		                        <li id="li_importation_bat_capturees_transvihmi" name="1"><a href="importation_chauves_souris_capturees_transvihmi.html">importation/exportation</a></li>                            
                              </ul>
		                    </li>
		                    <li id="li_batTransvihmiNonInvasivesDropdown" name="1"><a id="a_batTransvihmiNonInvasivesDropdown" name="1" href="#ul_batTransvihmiNonInvasivesDropdown" aria-expanded="false" data-toggle="collapse"></i>Non invasives</a>
		                      <ul id="ul_batTransvihmiNonInvasivesDropdown" name="1" class="collapse list-unstyled">
		                        <li id="li_bat_non_invasives_transvihmi" name="1"><a href="bat_non_invasives_transvihmi.html">données</a></li>                          
	                            <li id="li_bat_map_non_invasives_transvihmi" name="1"><a href="bat_map_non_invasives_transvihmi.html">carte</a></li>
    	                        <li id="li_importation_bat_non_invasives_transvihmi" name="1"><a href="importation_chauves_souris_non_invasives_transvihmi.html">importation/exportation</a></li>
                              </ul>
		                    </li>
	                      </ul>
                	    </li>
                	    <li id="li_viande_de_brousse_TransvihmiDropdown" name="1"><a id="a_viande_de_brousse_TransvihmiDropdown" name="1" href="#ul_viande_de_brousse_TransvihmiDropdown" aria-expanded="false" data-toggle="collapse" style="text-decoration:underline"> <i class="icon-Picto_ANTILOPE"></i>Viande de brousse</a>
                      	  <ul id="ul_viande_de_brousse_TransvihmiDropdown" name="1" class="collapse list-unstyled">
                        	<li id="li_viande_de_broussetransvihmi" name="1"><a href="importation_viande_de_brousse_transvihmi.html">données</a>                           
                        	<li id="li_viande_de_brousse_map_transvihmi" name="1"><a href="viande_de_brousse_map_transvihmi.html">carte</a></li>
                        	<li id="li_importation_viande_de_brousse_transvihmi" name="1"><a href="importation_viande_de_brousse_transvihmi.html">importation/exportation</a></li>
                      	  </ul>
                    	</li>
                      </ul>
                    </li>
                    
                    <li id="li_mivegecDropdown" name="2"> <a id="a_mivegecDropdown" name="2" href="#ul_mivegecDropdown" aria-expanded="false" data-toggle="collapse"> <i class="a-logo-mivegec"></i> </a>
                      <ul id="ul_mivegecDropdown" name="2" class="collapse list-unstyled">
                        
                        <li id="li_site_mivegec" name="2" style="text-align: right"><a href="site_mivegec.html">Site</a></li>                            
		                
                        <li id="li_bat_mivegecDropdown" name="2"><a id="a_bat_mivegecDropdown" name="2" href="#ul_bat_mivegecDropdown" aria-expanded="false" data-toggle="collapse" style="text-decoration:underline"> <i class="icon-Chauve-souris_Black2"></i>Chauve-souris</a>
                          <ul id="ul_bat_mivegecDropdown" name="2" class="collapse list-unstyled">
		                    
		                    <li id="li_suivi_longitudinal_donnees_missions_mivegec" name="2"style="text-align: right"><a href="suivi_longitudinal_donnees_missions_mivegec.html">Suivi longitudinal - données missions</a></li>
		                    <li id="li_suivi_longitudinal_donnees_journalieres_mivegec" name="2"style="text-align: right"><a href="suivi_longitudinal_donnees_journalieres_mivegec.html">Suivi longitudinal - données journalières</a></li>                            
                        		                    
		                    <li id="li_bat_mivegecCaptureesDropdown" name="2"><a id="a_bat_mivegecCaptureesDropdown" name="2" href="#ul_bat_mivegecCaptureesDropdown" aria-expanded="false" data-toggle="collapse"><i class="icon-capturee"></i>Capturées</a>
		                      <ul id="ul_bat_mivegecCaptureesDropdown" name="2" class="collapse list-unstyled">
		                        <li id="li_bat_capturees_mivegec" name="2"><a href="bat_capturees_mivegec.html">données</a></li>                            
		                        <li id="li_bat_map_capturees_mivegec" name="2"><a href="bat_map_capturees_mivegec.html">carte</a></li>
		                        <li id="li_importation_bat_capturees_mivegec" name="2"><a href="importation_chauves_souris_capturees_mivegec.html">importation/exportation</a></li>                            
                              </ul>
		                    </li>
		                    <li id="li_bat_mivegecNonInvasivesDropdown" name="2"><a id="a_bat_mivegecNonInvasivesDropdown" name="2" href="#ul_bat_mivegecNonInvasivesDropdown" aria-expanded="false" data-toggle="collapse"></i>Non invasives</a>
		                      <ul id="ul_bat_mivegecNonInvasivesDropdown" name="2" class="collapse list-unstyled">
		                        <li id="li_bat_non_invasives_mivegec" name="2"><a href="bat_non_invasives_mivegec.html">données</a></li>                          
	                            <li id="li_bat_map_non_invasives_mivegec" name="2"><a href="bat_map_non_invasives_mivegec.html">carte</a></li>
    	                        <li id="li_importation_bat_non_invasives_mivegec" name="2"><a href="importation_chauves_souris_non_invasives_mivegec.html">importation/exportation</a></li>
                              </ul>
		                    </li>
	                      </ul>
                	    </li>
                	     <li id="li_viande_de_brousse_MivegecDropdown" name="2"><a id="a_viande_de_brousse_MivegecDropdown" href="#ul_viande_de_brousse_MivegecDropdown" aria-expanded="false" data-toggle="collapse" style="text-decoration:underline"> <i class="icon-Picto_ANTILOPE"></i>Viande de brousse</a>
                      	  <ul id="ul_viande_de_brousse_MivegecDropdown" class="collapse list-unstyled">
                        	<li id="li_viande_de_broussemivegec" name="2"><a href="viande_de_brousse_mivegec.html">données</a></li>                            
                        	<li id="li_viande_de_brousse_map_mivegec" name="2"><a href="viande_de_brousse_map_mivegec.html">carte</a></li>
                        	<li id="li_importation_viande_de_brousse_mivegec" name="2"><a href="importation_viande_de_brousse_mivegec.html">importation/exportation</a></li>
                      	  </ul>
                    	</li>                    	
                      </ul>
                    </li>
                    
                    <li id="li_astreDropdown" name="6" class="active"> <a id="a_astreDropdown" href="#ul_astreDropdown" aria-expanded="true" data-toggle="collapse"> <i class="a-logo-cirad"></i> </a>
                      <ul id="ul_astreDropdown" name="6" class="collapse list-unstyled show">
                        
                        <li id="li_site_astre" name="6" style="text-align: right"><a href="site_astre.html">Site</a></li>                            
		                                        
                        <li id="li_batAstreDropdown" name="6" class="active"><a id="a_batAstreDropdown" href="#ul_batAstreDropdown" aria-expanded="true" data-toggle="collapse" style="text-decoration:underline"> <i class="icon-Chauve-souris_Black2"></i>Chauve-souris</a>
                          <ul id="ul_batAstreDropdown" name="6" class="collapse list-unstyled show">
		                    
		                    <li id="li_suivi_longitudinal_donnees_missions_astre" name="6"style="text-align: right"><a href="suivi_longitudinal_donnees_missions_astre.html">Suivi longitudinal - données missions</a></li>
		                    <li id="li_suivi_longitudinal_donnees_journalieres_astre" name="6"style="text-align: right"><a href="suivi_longitudinal_donnees_journalieres_astre.html">Suivi longitudinal - données journalières</a></li>                              
                        		                    
		                    <li id="li_batAstreCaptureesDropdown" name="6"><a id="a_batAstreCaptureesDropdown" name="6" href="#ul_batAstreCaptureesDropdown" aria-expanded="false" data-toggle="collapse">Capturées</a>
		                      <ul id="ul_batAstreCaptureesDropdown" name="6" class="collapse list-unstyled">
		                        <li id="li_bat_capturees_astre" name="6"><a href="bat_capturees_astre.html">données</a></li>                            
		                        <li id="li_bat_map_capturees_astre" name="6"><a href="bat_map_capturees_astre.html">carte</a></li>
		                        <li id="li_importation_bat_capturees_astre" name="6"><a href="importation_chauves_souris_capturees_astre.html">importation/exportation</a></li>                            
                              </ul>
		                    </li>
		                    <li id="li_batAstreNonInvasivesDropdown" name="6" class="active"><a id="a_batAstreNonInvasivesDropdown" href="#ul_batAstreNonInvasivesDropdown" aria-expanded="true" data-toggle="collapse">Non invasives</a>
		                      <ul id="ul_batAstreNonInvasivesDropdown" class="collapse list-unstyled show">
		                        <li id="li_bat_non_invasives_astre" name="6" class="active"><a href="bat_non_invasives_astre.html">données</a></li>                          
	                            <li id="li_bat_map_non_invasives_astre" name="6"><a href="bat_map_non_invasives_astre.html">carte</a></li>
    	                        <li id="li_bat_map_non_invasives_astre" name="6"><a href="importation_chauves_souris_non_invasives_astre.html">importation/exportation</a></li>
                              </ul>
		                    </li>
	                      </ul>
                	    </li>
                	  </ul>
                    </li>
                    
                    <li id="li_CIBUDropdown" name="3"> <a id="a_CIBUDropdown" name="3" href="#ul_CIBUDropdown" aria-expanded="false" data-toggle="collapse"> <i class="a-logo-institut-pasteur"></i> </a>
                      <ul id="ul_CIBUDropdown" name ="3" class="collapse list-unstyled">
                        <li id="li_individualCIBUDropdown" name="3"><a id="a_individualCIBUDropdown" name="3" href="#ul_individualCIBUDropdown" aria-expanded="false" data-toggle="collapse" style="text-decoration:underline"> <i class="icon-rodent"></i>Individus</a>
                          <ul id="ul_individualCIBUDropdown" name="3" class="collapse list-unstyled">
		                    <li id="li_individualCIBUSpecies1Dropdown" name="3"><a id="a_individualCIBUSpecies1Dropdown" name="3" href="#ul_individualCIBUSpecies1Dropdown" aria-expanded="false" data-toggle="collapse">(Espèces?)</a>
		                      <ul id="ul_individualCIBUSpecies1Dropdown" name="3" class="collapse list-unstyled">
		                        <li id="li_individual_species1_CIBU" name="3"><a href="liste_cibu.html?table=individus_cibu">données</a></li>                            
		                        <li id="li_individual_map_species1_cibu" name ="3"><a href="#">carte</a></li>
		                        <li id="li_importation_individual_cibu" name="3"><a href="#">importation/exportation</a></li>                            
                              </ul>
		                    </li>
	                      </ul>
                	    </li>
                	  </ul>
                    </li>   
                    
                    <li id="li_EpvoDropdown" name="4"> <a id="a_EpvoDropdown" href="#ul_EpvoDropdown" aria-expanded="false" data-toggle="collapse"> <i class="a-logo-epvo"></i> </a>
                      <ul id="ul_EpvoDropdown" class="collapse list-unstyled">
                        <li id="li_batEpvoDropdown" name="4"><a id="a_batEpvoDropdown" href="#ul_batEpvoDropdown" aria-expanded="false" data-toggle="collapse" style="text-decoration:underline"> <i class="icon-Chauve-souris_Black2"></i>Chauve-souris</a>
                          <ul id="ul_batEpvoDropdown" class="collapse list-unstyled">
		                    <li id="li_batEpvoCaptureesDropdown" name="4"><a id="a_batEpvoCaptureesDropdown" href="#ul_batEpvoCaptureesDropdown" aria-expanded="false" data-toggle="collapse">Capturées</a>
		                      <ul id="ul_batEpvoCaptureesDropdown" class="collapse list-unstyled">
		                        <li id="li_bat_capturees_epvo" name="4"><a href="#">données</a></li>                            
		                        <li id="li_bat_map_capturees_epvo" name="4"><a href="#">carte</a></li>
		                        <li id="li_importation_bat_epvo" name="4"><a href="#">importation/exportation</a></li>                            
                              </ul>
		                    </li>
		                    <li id="li_batEpvoNoninvasivesDropdown" name="4"><a id="a_batEpvoNoninvasivesDropdown" href="#ul_batEpvoNoninvasivesDropdown" aria-expanded="false" data-toggle="collapse">Non invasives</a>
		                      <ul id="ul_batEpvoNoninvasivesDropdown" class="collapse list-unstyled">
		                        <li id="li_bat_non_invasives_epvo" name="4"><a href="#">données</a></li>                          
	                            <li id="li_bat_map_non_invasives_epvo" name="4"><a href="#">carte</a></li>
    	                        <li id="li_importation_bat_epvo" name="4"><a href="#">importation/exportation</a></li>
                              </ul>
		                    </li>
	                      </ul>
                	    </li>
                	  </ul>
                    </li>
                    
                    <li id="li_IPGDropdown" name="5"> <a id="a_IPGDropdown" href="#ul_IPGDropdown" aria-expanded="false" data-toggle="collapse"> <i class="a-logo-IPG"></i> </a>
                      <ul id="ul_IPGDropdown" class="collapse list-unstyled">
                        <li id="li_batIPGDropdown" name="5"><a id="a_batIPGDropdown" href="#ul_batIPGDropdown" aria-expanded="false" data-toggle="collapse" style="text-decoration:underline"> <i class="icon-Chauve-souris_Black2"></i>Chauve-souris</a>
                          <ul id="ul_batIPGDropdown" class="collapse list-unstyled">
		                    <li id="li_batIPGCaptureesDropdown" name="5"><a id="a_batIPGCaptureesDropdown" href="#ul_batIPGCaptureesDropdown" aria-expanded="false" data-toggle="collapse">Capturées</a>
		                      <ul id="ul_batIPGCaptureesDropdown" class="collapse list-unstyled">
		                        <li id="li_bat_capturees_ipg" name="5"><a href="#">données</a></li>                            
		                        <li id="li_bat_map_capturees_ipg" name="5"><a href="#">carte</a></li>
		                        <li id="li_importation_bat_ipg" name="5"><a href="#">importation/exportation</a></li>                            
                              </ul>
		                    </li>
		                    <li id="li_batIPGNoninvasivesDropdown" name="5"><a id="a_batIPGNoninvasivesDropdown" href="#ul_batIPGNoninvasivesDropdown" aria-expanded="false" data-toggle="collapse">Non invasives</a>
		                      <ul id="ul_batIPGNoninvasivesDropdown" class="collapse list-unstyled">
		                        <li id="li_bat_non_invasives_ipg" name="5"><a href="#">données</a></li>                          
	                            <li id="li_bat_map_non_invasives_ipg" name="5"><a href="#">carte</a></li>
    	                        <li id="li_importation_bat_ipg" name="5"><a href="#">importation/exportation</a></li>
                              </ul>
		                    </li>
	                      </ul>
                	    </li>
                	  </ul>
                    </li>
          </ul>
        </nav>
        <div class="content-inner">
          <!-- Page Header-->
          <header class="page-header">
            <div class="container-fluid">
              <h2 class="no-margin-bottom">Collecte non-invasive</h2>
            </div>
          </header>
          
          <section>          
            <div class="container-fluid">              
              <div class="row">                
                <div class="col-lg-12">                  
                  <div class="card">        
                   <div class="card-header">
                     <h4>Ajouter la nouvelle collecte non-invasive</h4>
                    </div>
                    <div class="card-body">                                            
                      <form id="documentForm" name="documentForm" class="needs-validation" method="post" novalidate>
				        
				        <div class="card bg-light">
				          <div class="card-header card-header-transparent d-flex align-items-center">
                            <h3 class="h4">Données du site</h3>
                          </div>
                          <div class="card-body">
                            
                            <div class="row">
		      				  <div class="col-lg-4">
	            				<div class="form-group">
				                  <label for="N_site">N site</label>
			                      <div class="input-group">	                        
			                        <select id="N_site" class="form-control" onchange="select_N_site(this)">
	                                  <option></option>
	                          	    </select>
	                              </div>
			                    </div> 
	    					  </div>
	    					</div>	
                            
                            <div id="child_site" style="display: block;">		      				
			      			  <div class="row">
                                <div class="col-lg-6">
	       					      <div class="form-group">
			                        <label for="Equipe">Equipe</label>
		                            <input type="text" class="form-control" id="Equipe" placeholder="Equipe" >
		                          </div>  	
		                        </div>
		                        <div class="col-lg-6">           
		                          <div class="form-group">
		                            <label for="Pays">Pays</label>
		                            <div class="input-group">	                        
		                              <select id="Pays" class="form-control" required>
	                                    <option></option>
	                          	      </select>
	                                  <label  id="nouveauPays" class="input-group-addon btn btn-primary" for="Pays" data-toggle="modal" data-target="#nouvelleReference">
	       					            <span class="fa fa-plus"></span>
	    					          </label>
		                              <div class="invalid-feedback">
		        			            S'il vous plaît fournir un pays valide !
		      				          </div>
		      				        </div>
		      			          </div>
		      			        </div>  
		      			      </div>   
                              
                              <div class="row">
                                <div class="col-lg-6">
	       					      <div class="form-group">
			                        <label for="Region_collecte">Région (ex. nom de la ville, nom du parc...)</label>
		                            <input type="text" class="form-control" id="Region_collecte" placeholder="Région (ex. nom de la ville, nom du parc...)" >
		                          </div>  	
		                        </div>
		                        <div class="col-lg-6">
	       					      <div class="form-group">
			                        <label for="Site_collecte">Site précis de collecte (ex. village, lieu-dit)</label>
		                            <input type="text" class="form-control" id="Site_collecte" placeholder="Site précis de collecte (ex. village, lieu-dit)" >
		                          </div>  	
		                        </div>
		      			      </div>  
		      			    
		      			      <div class="row">
		      			        <div class="col-lg-6">	    
		      			          <div class="form-group">
		                            <label for="Environnement">Environnement (ex. forêt)</label>
		                            <div class="input-group">	                        
		                              <select id="Environnement" class="form-control" required >
	                                    <option></option>
	                          	      </select>
	                                  <label id="nouvelEnvironnement" class="input-group-addon btn btn-primary" for="Environnement" data-toggle="modal" data-target="#nouvelleReference">
	       					            <span class="fa fa-plus"></span>
	    					          </label>
		                              <div class="invalid-feedback">
		        			            S'il vous plaît fournir un environnement valide !
		      				          </div>
		      				        </div>
		      				      </div>
		      				    </div>
		      				    <div class="col-lg-6">      			        
							      <div class="form-group">
								    <label for="Proximite_village_km">Proximité du village</label>
								    <input type="text" class="form-control" id="Proximite_village_km" placeholder="Proximité du village" >
								  </div>	
							    </div>
							  </div>
		      			    
		      			      <div class="row">
	                    	    <div class="col-lg-4">
		      			    	  <div class="form-group">
		      			    	    <label for="Lat_degre_dec">Latitude coord. (deg. déc.)</label>
								    <input type="text" class="form-control" id="Lat_degre_dec" placeholder="Latitude coordonnées" >
								  </div>
							    </div>
							    <div class="col-lg-2">	
								  <div class="form-group">	  
								    <label for="Latitude">Latitude</label>
	                          	    <select id="Latitude" class="form-control" required >
	                            	  <option></option>
	                            	  <option>N</option>
	                            	  <option>S</option>
	                            	  <option>Manquant</option>
	                          	    </select>
	                          	    <div class="invalid-feedback">
								      Latitude !
								    </div>
	                          	  </div>	
	                            </div>											    
	                            <div class="col-lg-4">      			        
							      <div class="form-group">
								    <label for="Long_degre_dec">Longitude coord. (deg. déc.)</label>
								    <input type="text" class="form-control" id="Long_degre_dec" placeholder="Longitude coordonnées" >
								  </div>	
							    </div>
							    <div class="col-lg-2">
							      <div class="form-group">
	                                <label for="Longitude">Longitude</label>
	                                <select id="Longitude" class="form-control" required >
	                                  <option></option>
	                                  <option>E</option>
	                                  <option>W</option>
	                                  <option>Manquant</option>
	                                </select>
	                                <div class="invalid-feedback">
								      Longitude !
								    </div>
	                              </div>
	                            </div>
	                          </div>
	                        </div>
						  </div>
						</div>
					  
					    <div class="card bg-light">
				          <div class="card-header card-header-transparent d-flex align-items-center">
                            <h3 class="h4">Données de collecte</h3>
                          </div>
                          <div class="card-body">
                            
                            <div class="row">
                              <div class="col-lg-3">
	            				<div class="form-group">
	                              <label for="Date">Date</label>                                
	                              <div class="input-group">
	    							<input type="text" class="form-control input-datepicker" id="Date" placeholder="Date" required>
	    							<div class="input-group-addon open-datepicker btn btn-primary" id="spanDate">
	                                  <span class="fa fa-calendar"></span>
	    							</div>
	    							<div class="invalid-feedback">
		                              S'il vous plaît fournir une date !
		                            </div>
	                              </div>
	    					    </div> 
							  </div>
						      <div class="col-lg-3">	
							    <div class="form-group">	  
							      <label for="Heure_debut">Heure début</label>
				          	      <input type="time" class="form-control" id="Heure_debut" placeholder="Heure début" >
                        	    </div>										    
                              </div>
                              <div class="col-lg-3">	
							    <div class="form-group">	  
							      <label for="Heure_fin">Heure fin</label>
				          	      <input type="time" class="form-control" id="Heure_fin" placeholder="Heure fin" >
                        	    </div>										    
                              </div>
                            </div>
                            
                            <div class="row">	
	                          <div class="col-lg-6">	    
		      			        <div class="form-group">
		                          <label for="Lieu_collecte">Lieu de collecte (ex. grotte)</label>
		                          <div class="input-group">	                        
		                            <select id="Lieu_collecte" class="form-control" required >
	                                  <option></option>
	                                </select>
	                                <label  id="nouveauLieu_collecte" class="input-group-addon btn btn-primary" for="Lieu_collecte" data-toggle="modal" data-target="#nouvelleReference" >
	       					          <span class="fa fa-plus"></span>
	    					        </label>
		                            <div class="invalid-feedback">
		        			          S'il vous plaît fournir un lieu de collecte valide !
		      				        </div>
		      				      </div>
		      				    </div>    
		      			      </div>
	                          <div class="col-lg-6">      			        
							    <div class="form-group">
								  <label for=Type_site>Type de site</label>
	                              <select id="Type_site" class="form-control" required >
	                                <option></option>
	                                <option>Roost</option>
	                                <option>nourrissage</option>
	                                <option>Manquant</option>
	                              </select>
	                              <div class="invalid-feedback">
								    S'il vous plaît fournir un type de site valide !
								  </div>
								</div>	
							  </div>
						    </div>
						  </div>
						</div>
					    
					    <div class="card bg-light">
				          <div class="card-header card-header-transparent d-flex align-items-center">
                            <h3 class="h4">Données chauves souris</h3>
                          </div>
                          <div class="card-body">
                            <div class="row">
						      <div class="col-lg-6">	
							    <div class="form-group">	  
							      <label for="Type_chauves_souris">Type de chauve-souris</label>
	                              <select id="Type_chauves_souris" class="form-control" required >
	                            	<option></option>
	                            	<option>Frugivores</option>
	                            	<option>Insectivores</option>
	                            	<option>Frugivores et Insectivores</option>
	                            	<option>IN</option>
	                            	<option>Manquant</option>
	                          	  </select>
	                          	  <div class="invalid-feedback">
								    S'il vous plaît fournir un type de chauve-souris valide !
								  </div>
	                          	</div>	
	                          </div>
	                        </div>
	                        
	                        <div class="row">                    	  	    
		      			      <div class="col-lg-4">   			    
		      			        <div class="form-group">
		                          <label for="Famille_1">Famille 1</label>
		                          <div class="input-group">	                        
		                            <select id="Famille_1" class="form-control" onchange="select_famille(this, Genre_1, Espece_1)" required >
	                                  <option></option>
	                          	    </select>
	                                <label id="nouvelleFamille_1" class="input-group-addon btn btn-primary nouvelleFamille"  for="Famille_1" data-toggle="modal" data-target="#nouvelleReference">
	       					          <span class="fa fa-plus"></span>
	    					        </label>
		                            <div class="invalid-feedback">
		        			          S'il vous plaît fournir un type de famille valide !
		      				        </div> 
		      				      </div>	      				      
		      			        </div>	
		      			      </div>      	
		      			      <div class="col-lg-4"> 		    
		      			        <div class="form-group">
		                          <label for="Genre_1">Genre 1</label>
		                          <div class="input-group">	                        
		                            <select id="Genre_1" name="Genre_1" class="form-control" onchange="select_genre(Famille_1, this, Espece_1)" disabled required >
	                                  <option></option>
	                          	    </select>
	                                <label id="nouveauGenre_1" class="input-group-addon btn btn-outline-dark input-group-addon-disabled noclick nouveauGenre" for="Genre_1" data-toggle="modal" data-target="#nouvelleReference">
	       					          <span class="fa fa-plus"></span>
	    					        </label>
		                            <div class="invalid-feedback">
		        			          S'il vous plaît fournir un type de genre valide !
		      				        </div>
		      				      </div>
		      			        </div>  
		      			      </div> 
		      			      <div class="col-lg-4">     			    
		      			        <div class="form-group">
		                          <label for="Espece_1">Espece 1</label>
		                          <div class="input-group">	                        
		                            <select id="Espece_1" name="Espece_1" class="form-control" disabled required>
	                                  <option></option>
	                          	    </select>
	                                <label  id="nouvelleEspece_1" class="input-group-addon btn btn-outline-dark input-group-addon-disabled noclick nouvelleEspece" for="Espece_1" data-toggle="modal" data-target="#nouvelleReference">
	       					          <span class="fa fa-plus"></span>
	    					        </label>
		                            <div class="invalid-feedback">
		        			          S'il vous plaît fournir une espèce valide !
		      				        </div>
		      				      </div>	      				      
		      			        </div>
		      			      </div>
		      			    </div>
		      			    
		      			    <div class="row">                    	  	    
		      			      <div class="col-lg-4">   			    
		      			        <div class="form-group">
		                          <label for="Famille_2">Famille 2</label>
		                          <div class="input-group">	                        
		                            <select id="Famille_2" class="form-control" onchange="select_famille(this, Genre_2, Espece_2)" required >
	                                  <option></option>
	                          	    </select>
	                                <label id="nouvelleFamille_2" class="input-group-addon btn btn-primary nouvelleFamille" for="Famille_2" data-toggle="modal" data-target="#nouvelleReference">
	       					          <span class="fa fa-plus"></span>
	    					        </label>
		                            <div class="invalid-feedback">
		        			          S'il vous plaît fournir un type de famille valide !
		      				        </div>
		      				      </div>	      				      
		      			        </div>	
		      			      </div>      	
		      			      <div class="col-lg-4"> 		    
		      			        <div class="form-group">
		                          <label for="Genre_2">Genre 2</label>
		                          <div class="input-group">	                        
		                            <select id="Genre_2" name="Genre_2" class="form-control" onchange="select_genre(Famille_2, this, Espece_2)" disabled required >
	                                  <option></option>
	                          	    </select>
	                                <label id="nouveauGenre_2" class="input-group-addon btn btn-outline-dark input-group-addon-disabled noclick nouveauGenre" for="Genre_2" data-toggle="modal" data-target="#nouvelleReference">
	       					          <span class="fa fa-plus"></span>
	    					        </label>
		                            <div class="invalid-feedback">
		        			          S'il vous plaît fournir un type de genre valide !
		      				        </div> 
		      				      </div>
		      			        </div>  
		      			      </div> 
		      			      <div class="col-lg-4">     			    
		      			        <div class="form-group">
		                          <label for="Espece_2">Espece 2</label>
		                          <div class="input-group">	                        
		                            <select id="Espece_2" name="Espece_2" class="form-control" disabled required>
	                                  <option></option>
	                          	    </select>
	                                <label id="nouvelleEspece_2" class="input-group-addon btn btn-outline-dark input-group-addon-disabled noclick nouvelleEspece" for="Espece_2" data-toggle="modal" data-target="#nouvelleReference">
	       					          <span class="fa fa-plus"></span>
	    					        </label>
		                            <div class="invalid-feedback">
		        			          S'il vous plaît fournir une espèce valide !
		      				        </div>
		      				      </div>	      				      
		      			        </div>
		      			      </div>
		      			    </div>
		      			    
		      			    <div class="row">                    	  	    
		      			      <div class="col-lg-4">   			    
		      			        <div class="form-group">
		                          <label for="Famille_3">Famille 3</label>
		                          <div class="input-group">	                        
		                            <select id="Famille_3" class="form-control" onchange="select_famille(this, Genre_3, Espece_3)" required >
	                                  <option></option>
	                          	    </select>
	                                <label id="nouvelleFamille_3" class="input-group-addon btn btn-primary nouvelleFamille" for="Famille_3" data-toggle="modal" data-target="#nouvelleReference">
	       					          <span class="fa fa-plus"></span>
	    					        </label>
		                            <div class="invalid-feedback">
		        			          S'il vous plaît fournir un type de famille valide !
		      				        </div> 
		      				      </div>	      				      
		      			        </div>	
		      			      </div>      	
		      			      <div class="col-lg-4"> 		    
		      			        <div class="form-group">
		                          <label for="Genre_3">Genre 3</label>
		                          <div class="input-group">	                        
		                            <select id="Genre_3" name="Genre_3" class="form-control" onchange="select_genre(Famille_3, this, Espece_3)" disabled required>
	                                  <option></option>
	                          	    </select>
	                                <label id="nouveauGenre_3" class="input-group-addon btn btn-outline-dark input-group-addon-disabled noclick nouveauGenre" for="Genre_3" data-toggle="modal" data-target="#nouvelleReference">
	       					          <span class="fa fa-plus"></span>
	    					        </label>
		                            <div class="invalid-feedback">
		        			          S'il vous plaît fournir un type de genre valide !
		      				        </div>
		      				      </div>
		      			        </div>  
		      			      </div> 
		      			      <div class="col-lg-4">     			    
		      			        <div class="form-group">
		                          <label for="Espece_3">Espece 3</label>
		                          <div class="input-group">	                        
		                            <select id="Espece_3" name="Espece_3" class="form-control" disabled required >
	                                  <option></option>
	                          	    </select>
	                                <label id="nouvelleEspece_3" class="input-group-addon btn btn-outline-dark input-group-addon-disabled noclick nouvelleEspece" for="Espece_3" data-toggle="modal" data-target="#nouvelleReference">
	       					          <span class="fa fa-plus"></span>
	    					        </label>
		                            <div class="invalid-feedback">
		        			          S'il vous plaît fournir une espèce valide !
		      				        </div> 
		      				      </div>	      				      
		      			        </div>
		      			      </div>
		      			    </div>
		      			    
		      			    <div class="row">  		
		      			      <div class="col-lg-12">	      
	    	      			    <div class="form-group">
		      			          <label for="Remarques">Remarques</label>
		                          <textarea class="form-control col-xs-12" id="Remarques" placeholder="Remarques" rows="3"></textarea>
		                        </div>
		      			      </div>
		                    </div> 
		      			                                                                                         
                          </div>
                        </div>
                        
                        <div class="card bg-light">
				          <div class="card-header card-header-transparent d-flex align-items-center">
                            <h3 class="h4">Echantillons</h3>
                          </div>
                          <div class="card-body">
                          
                            <div class="content table-responsive table-full-width">
                        	  
                        	  <table id="example" class="table table-striped table-sm compact nowrap"> 
                          
		                        <thead>
						          <tr>
						            <th>Identification</th>
						            <th>Type</th>
						            <th>Nb fèces</th>
						            <th>Urine méthode</th>
						            <th>Urine cercles</th>
						            <th></th>
						          </tr>
						        </thead>
                          
                        	  </table>
                        	  
                        	  <div class="col-lg-2">	      
	    	      			    <div class="form-group">
								  <button id="addEchantillon" class="btn btn-danger btn-sm" style="width:100%; height: 100%">
                    				<i class="fa fa-plus"></i>
	               				  </button>
								</div>
						      </div>
						      
                      		</div>
		      			                                                                                         
                          </div>
                        </div>
                
                	    <!-- <button id="save" name="submit" type="submit" class="btn btn-primary btn-fill pull-right ladda-button" data-style="expand-right">                        	
	            			<span class="ladda-label">Ajouter la nouvelle collecte non-invasive</span>
	            			<span class="ladda-spinner"></span>
						</button>  -->
						
						<div class="card-body text-right">
                          <div class="row">
                            <div class="col-lg-9">
                              <div class="form-group">
                                <button id="save" name="save" type="submit" class="btn btn-primary btn-fill ladda-button" data-style="expand-right">                        	
		            	  	      <span class="ladda-label">Sauver la collecte</span>
		            	  	      <span class="ladda-spinner"></span>
						        </button>  
						      </div>  
						    </div>
						    <div class="col-lg-3">
						      <div class="form-group">
						        <div class="i-checks">
                                  <input id="andAdd" type="checkbox" value="" checked="" class="checkbox-template">
                                  <label for="andAdd">et ajouter</label>
                                </div>  
                              </div> 
                            </div>
                          </div>
                        </div>
                          
				      </form>
                                               
                    </div> 
                  </div>
                </div>
              </div>  
            </div>
          </section>          
          
          <!-- Page Footer-->
          <footer class="main-footer">
            <div class="container-fluid">
              <div class="row">
                <div class="col-sm-6">
                  <p>Projet EBO-SURSY  2017-2021</p>
                </div>
                <div class="col-sm-6 text-right">
                  <p>Conçu par Bruno Rosset - Cirad</p>
                </div>
              </div>
            </div>
          </footer>
        </div>
      </div>
    </div>
    
    <div id="nouvelleReference" tabindex="-1" role="dialog" aria-labelledby="nouvelleReference" aria-hidden="true" class="modal fade text-left">
      <div role="document" class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h4 id="referenceModalLabel" class="modal-title">ModalLabel</h4>
            <button type="button" data-dismiss="modal" aria-label="Close" class="close"><span aria-hidden="true">×</span></button>
          </div>
          <div class="modal-body">
            <form id="form-group-Reference">
              <div class="form-group">
                <label id="referenceLabel">Label</label>
                <input id="referenceInput" type="text" class="form-control">
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button id="btnAnnuler" type="button" data-dismiss="modal" class="btn btn-secondary">Annuler</button>
            <!-- <button type="submit" class="btn btn-primary" id="btnAjouter">Ajouter</button> -->
            <button id="btnAjouter" name="submit" type="submit" class="btn btn-primary btn-fill pull-right ladda-button" data-style="expand-right">                        	
	          <span class="ladda-label">Ajouter</span>
	          <span class="ladda-spinner"></span>
			</button>  
          </div>
        </div>
      </div>
    </div>
	
	<script type="text/javascript">
    	$('.input-datepicker').datepicker({
        	language: 'fr',
        	autoclose: true
      	});
    </script>
	
	<script type="text/javascript">
		$('#spanDate').click(function(){
	   		event.stopPropagation(); 
	   	    dp = $('#Date').datepicker({
	   	    	language: 'fr',
	   	       	autoclose: true
   	    	});
   			dp.show();
   			$('#Date').focus();
	  	});
     </script>
         
     <script type="text/javascript">
   		$('#nouveauPays').click(function(){   			
   			$('#referenceModalLabel').html('Nouveau Pays');
   			$('#referenceLabel').html('Pays :');
   			$('#referenceInput').prop('disabled', false);
   			$('#btnAjouter').data('data-id', 'pays');
   			clickedBtn = this;
   		});
	       		
   		$('#nouveauLieu_collecte').click(function(){
   			$('#referenceModalLabel').html('Nouveau Lieu de collecte');
   			$('#referenceLabel').html('Lieu de collecte :');
   			$('#referenceInput').prop('disabled', false);
   			$('#btnAjouter').data('data-id', 'lieu_collecte');
   			clickedBtn = this;
		});
   		
   		$('#nouvelEnvironnement').click(function(){
   			$('#referenceModalLabel').html('Nouvel Environnement');
   			$('#referenceLabel').html('Environnement :');
   			$('#referenceInput').prop('disabled', false);
   			$('#btnAjouter').data('data-id', 'environnement');   			
   			clickedBtn = this;   			
		});   		
	
   		$('.nouvelleFamille').click(function(){
   			$('#referenceModalLabel').html('Nouvelle Famille');
   			$('#referenceLabel').html('Famille :');
   			$('#referenceInput').prop('disabled', false);
   			
			var nouvelleFamille = $(this).attr('id');
   			
   			if (nouvelleFamille == 'nouvelleFamille_1') {
   				$('#btnAjouter').data('data-id', 'famille_1'); 	
   			} else if (nouvelleFamille == 'nouvelleFamille_2') {
   				$('#btnAjouter').data('data-id', 'famille_2'); 	
   			} else if (nouvelleFamille == 'nouvelleFamille_3') {
   				$('#btnAjouter').data('data-id', 'famille_3'); 	
   			};
   			
   			clickedBtn = this;   			
   		}); 
   		
   		$('.nouveauGenre').click(function(){
   			
   			$('#referenceModalLabel').html('Nouvelle Famille');
   			$('#referenceLabel').html('Famille :');
   			
   			var nouveauGenre = $(this).attr('id');
   			
   			if (nouveauGenre == 'nouveauGenre_1') {
   				$('#btnAjouter').data('data-id', 'genre_1'); 	
   				var Famille =  document.getElementById('Famille_1');
   			} else if (nouveauGenre == 'nouveauGenre_2') {
   				$('#btnAjouter').data('data-id', 'genre_2'); 	
   				var Famille =  document.getElementById('Famille_2');
   			} else if (nouveauGenre == 'nouveauGenre_3') {
   				$('#btnAjouter').data('data-id', 'genre_3'); 	
   				var Famille =  document.getElementById('Famille_3');
   			};
   			 
   			clickedBtn = this;   			
   			   			
   			var referenceInput = document.getElementById('referenceInput');
   			referenceInput.value = Famille.value;
   			$('#referenceInput').prop('disabled', true);
   			
   			var genreForm = document.getElementById('form-group-Reference');
			var genreDiv  = document.createElement('div');
			genreDiv.className = 'form-group';
			genreDiv.setAttribute('name', 'genreDiv');
			genreDiv.setAttribute('id', 'genreDiv');

			var genreLabel = document.createElement('label');
			genreLabel.setAttribute('name', 'genreLabel');
			genreLabel.setAttribute('id', 'genreLabel');
			genreLabel.appendChild(document.createTextNode('Genre :'));
			
			var genreInput = document.createElement('input');
			genreInput.setAttribute('type', 'text');
			genreInput.setAttribute('name', 'genreInput');
			genreInput.setAttribute('id', 'genreInput');
			genreInput.className = 'form-control';
			
			genreDiv.appendChild(genreLabel);
			genreDiv.appendChild(genreInput);
			genreForm.appendChild(genreDiv);
   		});
   		
   		$('.nouvelleEspece').click(function(){
   			$('#referenceModalLabel').html('Nouvelle Famille');
   			$('#referenceLabel').html('Famille :');   			
   			
			var nouvelleEspece = $(this).attr('id');
   			
   			if (nouvelleEspece == 'nouvelleEspece_1') {
   				$('#btnAjouter').data('data-id', 'espece_1'); 	
   				var Famille =  document.getElementById('Famille_1');
   				var Genre =  document.getElementById('Genre_1');
   			} else if (nouvelleEspece == 'nouvelleEspece_2') {
   				$('#btnAjouter').data('data-id', 'espece_2'); 	
   				var Famille =  document.getElementById('Famille_2');
   				var Genre =  document.getElementById('Genre_2');
   			} else if (nouvelleEspece == 'nouvelleEspece_3') {
   				$('#btnAjouter').data('data-id', 'espece_3'); 	
   				var Famille =  document.getElementById('Famille_3');
   				var Genre =  document.getElementById('Genre_3');
   			};
   			
   			clickedBtn = this;   	  			
   			
   			var referenceInput = document.getElementById('referenceInput');
   			referenceInput.value = Famille.value;
   			$('#referenceInput').prop('disabled', true);
   			
   			var genreForm = document.getElementById('form-group-Reference');
			var genreDiv  = document.createElement('div');
			genreDiv.className = 'form-group';
			genreDiv.setAttribute('name', 'genreDiv');
			genreDiv.setAttribute('id', 'genreDiv');
			
			var genreLabel = document.createElement('label');
			genreLabel.setAttribute('name', 'genreLabel');
			genreLabel.setAttribute('id', 'genreLabel');
			genreLabel.appendChild(document.createTextNode('Genre :'));
			
			var genreInput = document.createElement('input');
			genreInput.setAttribute('type', 'text');
			genreInput.setAttribute('name', 'genreInput');
			genreInput.setAttribute('id', 'genreInput');
			genreInput.className = 'form-control';
			genreInput.value = Genre.value;
						
			var genreLabel2 = document.createElement('label');
			genreLabel2.setAttribute('name', 'genreLabel2');
			genreLabel2.setAttribute('id', 'genreLabel2');
			genreLabel2.appendChild(document.createTextNode('Espece :'));
			
			var genreInput2 = document.createElement('input');
			genreInput2.setAttribute('type', 'text');
			genreInput2.setAttribute('name', 'genreInput2');
			genreInput2.setAttribute('id', 'genreInput2');
			genreInput2.className = 'form-control';
			
			genreDiv.appendChild(genreLabel);
			genreDiv.appendChild(genreInput);
			genreDiv.appendChild(genreLabel2);
			genreDiv.appendChild(genreInput2);
			genreForm.appendChild(genreDiv);
			
			$('#genreInput').prop('disabled', true);
   		});
   		
   		$("#btnAjouter").click(function(e){
	    	e.preventDefault();
	    	if(clickedBtn){	    		
	    		var l = Ladda.create(document.querySelector('.ladda-button'));
				l.start();				
				
				if ($(this).data('data-id') == 'pays') {
					var select = document.getElementById('Pays');	    		
					addReference(html, 'pays', 'Pays', select, null, null);	
   				} else if ($(this).data('data-id') == 'lieu_collecte') {
					var select = document.getElementById('Lieu_collecte');	    		
					addReference(html, 'lieu_collecte', 'Lieu_collecte', select, null, null);	
   				} else if ($(this).data('data-id') == 'environnement') {
					var select = document.getElementById('Environnement');	    		
					addReference(html, 'environnement', 'Environnement', select, null, null);	
   				} else if ($(this).data('data-id') == 'famille_1') {
					var select = document.getElementById('Famille_1');	
					addReference(html, 'famille', 'Famille', select, null, null);	
   				} else if ($(this).data('data-id') == 'famille_2') {
					var select = document.getElementById('Famille_2');	
					addReference(html, 'famille', 'Famille', select, null, null);	
   				} else if ($(this).data('data-id') == 'famille_3') {
					var select = document.getElementById('Famille_3');	
					addReference(html, 'famille', 'Famille', select, null, null);	
   				} else if ($(this).data('data-id') == 'genre_1') {
   					var select = document.getElementById('Famille_1');
					var select2 = document.getElementById('Genre_1');	
					addReference(html, 'genre', 'Genre', select, select2, null);	
   				} else if ($(this).data('data-id') == 'genre_2') {
   					var select = document.getElementById('Famille_2');
					var select2 = document.getElementById('Genre_2');	
					addReference(html, 'genre', 'Genre', select, select2, null);	
   				} else if ($(this).data('data-id') == 'genre_3') {
   					var select = document.getElementById('Famille_3');
					var select2 = document.getElementById('Genre_3');	
					addReference(html, 'genre', 'Genre', select, select2, null);	
   				} else if ($(this).data('data-id') == 'espece_1') {
   					var select = document.getElementById('Famille_1');
					var select2 = document.getElementById('Genre_1');	
					var select3 = document.getElementById('Espece_1');
					addReference(html, 'espece', 'Espece', select, select2, select3);	
   				} else if ($(this).data('data-id') == 'espece_2') {
   					var select = document.getElementById('Famille_2');
					var select2 = document.getElementById('Genre_2');	
					var select3 = document.getElementById('Espece_2');		
					addReference(html, 'espece', 'Espece', select, select2, select3);	
   				} else if ($(this).data('data-id') == 'espece_3') {
   					var select = document.getElementById('Famille_3');
					var select2 = document.getElementById('Genre_3');	
					var select3 = document.getElementById('Espece_3');
					addReference(html, 'espece', 'Espece', select, select2, select3);	
   				};
   				
   				var referenceInput = document.getElementById('referenceInput');
   				referenceInput.value = "";				
				l.stop();				
				clickedBtn = null;
	    		$('#nouvelleReference').modal('hide');
	        	// close the modal dialog.
	      	}
	    });
   		
   		/*function addReference(table, field, select, select2, select3) {
	   		
   			var debug;
   			if (localStorage.getItem('debug') === null) {
   				debug = '';
   			} else {
   				debug = localStorage.getItem('debug');
   			};
   			
			var localDB = new PouchDB(table + debug);
			
			var value = document.getElementById('referenceInput').value;
			if (select2 != null) {
				var value2 = document.getElementById('genreInput').value;
			}
			if (select3 != null) {
				var value3 = document.getElementById('genreInput2').value;
			}
			
			if (field == 'Famille') {
				
				localDB = new PouchDB('espece' + debug);	
				
				var localDB2 = new PouchDB('espece' + debug);
				
				localDB.allDocs({
					include_docs: true,
					attachments: true
				}).then(function (result) {
					// handle result
					if (typeof(JSON.stringify(result)) != "undefined"){  
						id = result.rows[0].doc._id;
						var i = 0;						
						var rowFamille =[];						
						result.rows[0].doc.Famille.forEach(function(row){
							rowFamille[i] = JSON.stringify(row);
							rowFamille[i] = JSON.parse(rowFamille[i]);
							i = i + 1;
						});
						value = value.toUpperCase();
						rowFamille[i] = new addNom(value);
						famille = JSON.stringify(rowFamille);
						famille = JSON.parse(famille);
						
						localDB.get(id).then(function (doc) {
							doc.Famille = famille;				
							return localDB.put(doc);
						}).then(function (doc) {
							
							if (navigator.onLine) {
								var remote_couchdb = localStorage.getItem('remote_couchdb');
								var remoteDB = new PouchDB(remote_couchdb + 'espece' + debug);
								localDB.sync(remoteDB).on('complete', (info) => {   
						    		var localDB2 = new PouchDB('espece' + debug);
						    		localDB2.sync(remoteDB, {
						    			live: true,
						    			retry: true
						    		}).on('paused', function (info) {
						    			// replication was paused, usually because of a lost connection
						    		}).on('change', function (change) {
						    			// yo, something changed!
						    		}).on('active', function (info) {
						    			  // replication was resumed
						    		}).on('error', function (err) {
						    			// error while replicating
						    			alert('alert 2 espece : ' + JSON.stringify(err));
						    		}); //Continous sync with options
						    	}).on('error', function (err) {
						    		// error while replicating
						    		alert('alert espece : ' + JSON.stringify(err));
						    	});
							}
							
							localDB2.allDocs({
								include_docs: true,
								attachments: true
							}).then(function (result) {
								
								localStorage['especeTablesData'] = JSON.stringify(result);
					    		
					    		Famille_1.options[Famille_1.options.length] = new Option(value, value);
					    		Famille_2.options[Famille_2.options.length] = new Option(value, value);
					    		Famille_3.options[Famille_3.options.length] = new Option(value, value);
					    		
					    		select.value = value;
					    		select.onchange();
							});	
							
						});	
					}
				}).catch(function (err) {
					console.log(err);
				});
						
			} else if (field == 'Genre') {
				
				localDB = new PouchDB('espece' + debug);	
								
				var localDB2 = new PouchDB('espece' + debug);
				
				localDB.allDocs({
					include_docs: true,
					attachments: true
				}).then(function (result) {
					// handle result
					if (typeof(JSON.stringify(result)) != "undefined"){  
						id = result.rows[0].doc._id;
						
						var i = 0;			
						var iGenre;
						var j = 0;
						
						result.rows[0].doc.Famille.forEach(function(row){
							if (row.Nom == value) {
								iGenre = j;
								var rowGenre =[];	
								if (!("Genre" in row) == 0) {
									row.Genre.forEach(function(row1){
										rowGenre[i] = JSON.stringify(row1);
										rowGenre[i] = JSON.parse(rowGenre[i]);
										i = i + 1;
									});
								};
								rowGenre[i] = new addNom(value2);
								genre = JSON.stringify(rowGenre);
								genre = JSON.parse(genre);
			    			};	
			    			j = j + 1;
						});
						
						localDB.get(id).then(function (doc) {
							doc.Famille[iGenre].Genre = genre;							
							return localDB.put(doc);
						}).then(function (doc) {
							
							if (navigator.onLine) {
								var remote_couchdb = localStorage.getItem('remote_couchdb');
								var remoteDB = new PouchDB(remote_couchdb + 'espece' + debug);
								localDB.sync(remoteDB).on('complete', (info) => {   
						    		var localDB2 = new PouchDB('espece' + debug);
						    		localDB2.sync(remoteDB, {
						    			live: true,
						    			retry: true
						    		}).on('paused', function (info) {
						    			// replication was paused, usually because of a lost connection
						    		}).on('change', function (change) {
						    			// yo, something changed!
						    		}).on('active', function (info) {
						    			  // replication was resumed
						    		}).on('error', function (err) {
						    			// error while replicating
						    			alert('alert 2 espece : ' + JSON.stringify(err));
						    		}); //Continous sync with options
						    	}).on('error', function (err) {
						    		// error while replicating
						    		alert('alert espece : ' + JSON.stringify(err));
						    	});
							}
							
							localDB2.allDocs({
								include_docs: true,
								attachments: true
							}).then(function (result) {
								
								localStorage['especeTablesData'] = JSON.stringify(result);
					    		
								select2.options[select2.options.length] = new Option(value2, value2);
					    		select2.value = value2;
					    		select2.onchange();
							});	
							
						});	
						
					}
				}).catch(function (err) {
					console.log(err);
				});
						
			} else if (field == 'Espece') {
				
				localDB = new PouchDB('espece' + debug);	
								
				var localDB2 = new PouchDB('espece' + debug);
				
				localDB.allDocs({
					include_docs: true,
					attachments: true
				}).then(function (result) {
					// handle result
					if (typeof(JSON.stringify(result)) != "undefined"){  
						id = result.rows[0].doc._id;
						
						var i = 0;			
						var iGenre;
						var iEspece;
						var j = 0;
						var k = 0;
						
						result.rows[0].doc.Famille.forEach(function(row){
							if (row.Nom == value) {
								iGenre = j;
								row.Genre.forEach(function(row1){
									if (row1.Nom == value2) {
										iEspece = k;
										var rowEspece =[];	
										if (!("Espece" in row1) == 0) {
											row1.Espece.forEach(function(row2){
												rowEspece[i] = JSON.stringify(row2);
												rowEspece[i] = JSON.parse(rowEspece[i]);
												i = i + 1;
											});
										};
										rowEspece[i] = new addNom(value3);
										espece = JSON.stringify(rowEspece);
										espece = JSON.parse(espece);
									};
									k = k + 1;
								});								
			    			};	
			    			j = j + 1;
						});
						
						localDB.get(id).then(function (doc) {
							doc.Famille[iGenre].Genre[iEspece].Espece = espece;							
							return localDB.put(doc);
						}).then(function (doc) {
	
							if (navigator.onLine) {
								var remote_couchdb = localStorage.getItem('remote_couchdb');
								var remoteDB = new PouchDB(remote_couchdb + 'espece' + debug);
								localDB.sync(remoteDB).on('complete', (info) => {   
						    		var localDB2 = new PouchDB('espece' + debug);
						    		localDB2.sync(remoteDB, {
						    			live: true,
						    			retry: true
						    		}).on('paused', function (info) {
						    			// replication was paused, usually because of a lost connection
						    		}).on('change', function (change) {
						    			// yo, something changed!
						    		}).on('active', function (info) {
						    			  // replication was resumed
						    		}).on('error', function (err) {
						    			// error while replicating
						    			alert('alert 2 espece : ' + JSON.stringify(err));
						    		}); //Continous sync with options
						    	}).on('error', function (err) {
						    		// error while replicating
						    		alert('alert espece : ' + JSON.stringify(err));
						    	});
							}
							
							localDB2.allDocs({
								include_docs: true,
								attachments: true
							}).then(function (result) {
								
								localStorage['especeTablesData'] = JSON.stringify(result);
					    		
								select3.options[select3.options.length] = new Option(value3, value3);
					    		select3.value = value3;
					    	});
							
						});	
					}
				}).catch(function (err) {
					console.log(err);
				});
			} 
   		}   	*/	
   		
   		$("#btnAnnuler").click(function(e){
	    	e.preventDefault();
	    	$('#nouvelleReference').modal('hide');
   		});
   		
   		$(function () {
   		    $('#nouvelleReference').on('hidden.bs.modal', function () {
   		    	removeModalDiv();
	   		});
   		});
   		
   		function removeModalDiv() {
   			try {
   				$('#referenceInput').prop('disabled', false);
   				var referenceInput = document.getElementById('referenceInput');
   				referenceInput.value = "";
	    		var genreForm = document.getElementById('form-group-Reference');
			    var genreLabel = document.getElementById('genreLabel');
			    var genreInput = document.getElementById('genreInput');
			    var genreDiv = document.getElementById('genreDiv');
			    genreDiv.removeChild(genreLabel);
			    genreDiv.removeChild(genreInput);
			    genreForm.removeChild(genreDiv);
		    }
	    	catch(error) {
	    	};	
   		};   		
   		
   		function addNom(NomX) {
		    this.Nom = NomX;
		    	    
		    this.NomX = function() {
		        return this.Nom;
		    };		    
		};
   		
    </script> 
    
    <script type="text/javascript">	
	    function select_N_site(select) {			
			var valeurN_site = select.options[select.selectedIndex].text;	
			
			if (valeurN_site == "") {
				
				var Equipe = document.getElementById("Equipe");
				Equipe.value = '';
				Equipe.disabled = false;
				
				var Pays = document.getElementById("Pays");			
				try {
					Pays.value = '';	
					Pays.disabled = false;
				}
				catch(err) {
				};
				
				var Region_collecte = document.getElementById("Region_collecte");
				Region_collecte.value = '';
				Region_collecte.disabled = false;
				
				var Site_collecte = document.getElementById("Site_collecte");
				Site_collecte.value = '';
				Site_collecte.disabled = false;
										
				var Environnement = document.getElementById("Environnement");
				Environnement.value = '';
				Environnement.disabled = false;
				
				var Lat_degre_dec = document.getElementById("Lat_degre_dec");
				Lat_degre_dec.value = '';
				Lat_degre_dec.disabled = false;
				
				var Latitude = document.getElementById("Latitude");
				Latitude.value = '';
				Latitude.disabled = false;
				
				var Lat_degre_dec = document.getElementById("Lat_degre_dec");
				Lat_degre_dec.value = '';
				Lat_degre_dec.disabled = false;
				
				var Longitude = document.getElementById("Longitude");
				Longitude.value = '';
				Longitude.disabled = false;
				
				var Long_degre_dec = document.getElementById("Long_degre_dec");
				Long_degre_dec.value = '';
				Long_degre_dec.disabled = false;
				
				var Proximite_village_km = document.getElementById("Proximite_village_km");
				Proximite_village_km.value = '';
				Proximite_village_km.disabled = false;
				
			} else {
				
				//var id = select.options[select.selectedIndex].value;
				
				if (localStorage.getItem('web') === 'oui') {
					var remote_couchdb = localStorage.getItem('remote_couchdb');
					var DB = new PouchDB(remote_couchdb + 'site_astre' + debug);
				} else {
					var DB = new PouchDB('site_astre' + debug);
				};	
				
				DB.find({
					selector: {N_site: valeurN_site},
					fields: ['_id', 'N_site', 'Equipe', 'Pays', 'Region_collecte', 'Environnement', 
						     'Latitude', 'Lat_degre_dec', 'Longitude', 'Long_degre_dec', 'Proximite_village_km']
				}).then(function (result) {
			
					if (localStorage.getItem('web') === 'oui') {
						var remote_couchdb = localStorage.getItem('remote_couchdb');
						var DB2 = new PouchDB(remote_couchdb + 'site_astre' + debug);
					} else {
						var DB2 = new PouchDB('site_astre' + debug);
					};
					
					console.log(JSON.stringify(result));
					var res =  JSON.parse(JSON.stringify(result));
					id = res.docs[0]._id;
		    		
					DB2.get(id).then(function (doc) {
						
						var Equipe = document.getElementById("Equipe");
						Equipe.value = doc.Equipe;
						Equipe.disabled = true;
						
						var Pays = document.getElementById("Pays");			
						try {
							Pays.value = doc.Pays;	
							Pays.disabled = true;
						}
						catch(err) {
						};
						
						var Region_collecte = document.getElementById("Region_collecte");
						Region_collecte.value = doc.Region_capture;
						Region_collecte.disabled = true;
						
						var Site_collecte = document.getElementById("Site_collecte");
						Site_collecte.value = doc.Site_capture;
						Site_collecte.disabled = true;
												
						var Environnement = document.getElementById("Environnement");
						Environnement.value = doc.Environnement;
						Environnement.disabled = true;
						
						var Lat_degre_dec = document.getElementById("Lat_degre_dec");
						Lat_degre_dec.value = doc.Lat_degre_dec;
						Lat_degre_dec.disabled = true;
						
						var Latitude = document.getElementById("Latitude");
						Latitude.value = doc.Latitude;
						Latitude.disabled = true;
						
						var Lat_degre_dec = document.getElementById("Lat_degre_dec");
						Lat_degre_dec.value = doc.Lat_degre_dec;
						Lat_degre_dec.disabled = true;
						
						var Longitude = document.getElementById("Longitude");
						Longitude.value = doc.Longitude;
						Longitude.disabled = true;
						
						var Long_degre_dec = document.getElementById("Long_degre_dec");
						Long_degre_dec.value = doc.Long_degre_dec;
						Long_degre_dec.disabled = true;
						
						var Proximite_village_km = document.getElementById("Proximite_village_km");
						Proximite_village_km.value = doc.Proximite_village_km;
						Proximite_village_km.disabled = true;
						
					})
				});
			}
		}
	</script>
	
	<script type="text/javascript">
		// Example starter JavaScript for disabling form submissions if there are invalid fields
  		(function() {
  			'use strict';
  		  	window.addEventListener('load', function() {
  		    	// Fetch all the forms we want to apply custom Bootstrap validation styles to
  		    	var forms = document.getElementsByClassName('needs-validation');
  		    	// Loop over them and prevent submission
  		    	var validation = Array.prototype.filter.call(forms, function(form) {
  		      		form.addEventListener('submit', function(event) {
  		        		if (form.checkValidity() === false) {
  		          			event.preventDefault();
  		          			event.stopPropagation();
  		        		} else {
  		          			event.preventDefault();
  		          		addBatNoninvasives();
  		        		} 		        
  		        		form.classList.add('was-validated');
  		      		}, false);
  		    	});
  			}, false);
  		})();
 		
  		function addBatNoninvasives() {  
			
  			var l = Ladda.create( document.querySelector( '.ladda-button' ) );

			// Start loading
			l.start();
			
			var id = uuid();
			
			var N_site = document.getElementById('N_site').value;
			var Date = document.getElementById('Date').value;
			var Heure_debut = document.getElementById('Heure_debut').value;
			var Heure_fin = document.getElementById('Heure_fin').value;
			var Equipe = document.getElementById('Equipe').value;
			var Pays = document.getElementById('Pays').value;
			var Region_collecte = document.getElementById('Region_collecte').value;
			var Site_collecte = document.getElementById('Site_collecte').value;
			var Environnement = document.getElementById('Environnement').value;
			var Lieu_collecte = document.getElementById('Lieu_collecte').value;
			var Lat_degre_dec = document.getElementById('Lat_degre_dec').value;
			var Latitude = document.getElementById('Latitude').value;
			var Long_degre_dec = document.getElementById('Long_degre_dec').value;
			var Longitude = document.getElementById('Longitude').value;
			var Type_site = document.getElementById('Type_site').value;
			var Proximite_village_km = document.getElementById('Proximite_village_km').value;
			var Type_chauves_souris = document.getElementById('Type_chauves_souris').value;
			var Famille_1 = document.getElementById('Famille_1').value;
			var Genre_1 = document.getElementById('Genre_1').value;
			var Espece_1 = document.getElementById('Espece_1').value;
			var Famille_2 = document.getElementById('Famille_2').value;
			var Genre_2 = document.getElementById('Genre_2').value;
			var Espece_2 = document.getElementById('Espece_2').value;
			var Famille_3 = document.getElementById('Famille_3').value;
			var Genre_3 = document.getElementById('Genre_3').value;
			var Espece_3 = document.getElementById('Espece_3').value;
			var Remarques = document.getElementById('Remarques').value;
						
			var row =[];
						
			var table = document.getElementById('example');
	        var rowCount = table.rows.length;
	        try {
		        if (rowCount > 1) {
			        for (i=1; i<rowCount; i++){
			            var inputs = table.rows.item(i).getElementsByTagName("input");
			            var selects = table.rows.item(i).getElementsByTagName("select");
			            
			        	row[i-1] = new addEchantillon(inputs[0].value, selects[0].value, inputs[1].value, selects[1].value, inputs[2].value);
					} 
		        }
		        var Echantillon = JSON.stringify(row);
				Echantillon = JSON.parse(Echantillon);
	        }catch(err) {
	        	var Echantillon = JSON.stringify(row);
				Echantillon = JSON.parse(Echantillon);
			};
			
			var andAdd = document.getElementById("andAdd");
		  	  if (andAdd.checked == true){
		  	    var doc = new Object();
		  		 
		  	    doc.N_site = N_site;
		  	    doc.Equipe = Equipe;
		  		doc.Pays = Pays;
		  	    doc.Region_collecte = Region_collecte;
		  	    doc.Site_collecte = Site_collecte;
		  	    doc.Environnement = Environnement;
		  	    doc.Lat_degre_dec = Lat_degre_dec;
		  	    doc.Latitude = Latitude;
		  	    doc.Long_degre_dec = Long_degre_dec;
		  	    doc.Longitude = Longitude;
		  	    doc.Date = Date;
		  	  	doc.Heure_debut = Heure_debut;
		  		doc.Heure_fin = Heure_fin;
		  		doc.Proximite_village_km = Proximite_village_km;
		  		doc.Lieu_collecte = Lieu_collecte;
		  		doc.Type_site = Type_site;
		  	    doc.Type_chauves_souris = Type_chauves_souris;
		  	    doc.Famille_1 = Famille_1;
		  	    doc.Genre_1 = Genre_1;
		  	    doc.Espece_1 = Espece_1;
		  	    doc.Famille_2 = Famille_2;
		  	    doc.Genre_2 = Genre_2;
		  	    doc.Espece_2 = Espece_2;
		  	    doc.Famille_3 = Famille_3;
		  	    doc.Genre_3 = Genre_3; 
		  	    doc.Espece_3 = Espece_3;
		  	    doc.Remarques = Remarques;
		  	    doc.Echantillons = Echantillon
		  	    		  			  
		  		localStorage['chauves_souris_non_invasivesTablesData'] = JSON.stringify(doc);
		  	};
			
			if (localStorage.getItem('web') === 'oui') {
				var remote_couchdb = localStorage.getItem('remote_couchdb');
				var DB = new PouchDB(remote_couchdb + 'chauves_souris_non_invasives_astre' + debug);
			} else {
				var DB = new PouchDB('chauves_souris_non_invasives_astre' + debug);
			};
			
			DB.put({
				_id: id,
				N_site: N_site,
				Equipe: Equipe,
				Pays: Pays,
				Region_collecte: Region_collecte,
				Site_collecte: Site_collecte,
				Environnement: Environnement,
				Lat_degre_dec: Lat_degre_dec,
				Latitude: Latitude,
				Long_degre_dec: Long_degre_dec,
				Longitude: Longitude,
				Type_site: Type_site,
				Proximite_village_km: Proximite_village_km,
				Date: Date,
				Heure_debut: Heure_debut,
				Heure_fin: Heure_fin,
				Lieu_collecte: Lieu_collecte,
				Type_chauves_souris: Type_chauves_souris,
				Famille_1: Famille_1,
				Genre_1: Genre_1,
				Espece_1: Espece_1,
				Famille_2: Famille_2,
				Genre_2: Genre_2,
				Espece_2: Espece_2,
				Famille_3: Famille_3,
				Genre_3: Genre_3, 
				Espece_3: Espece_3,
				Remarques: Remarques,
				Echantillons: Echantillon
				
				
			}).then(function (response) {
				
				if ((navigator.onLine) && (localStorage.getItem('web') !== 'oui')) {
					var localDB2 = new PouchDB('chauves_souris_non_invasives_astre' + debug);	
					var remote_couchdb = localStorage.getItem('remote_couchdb');
					var remoteDB = new PouchDB(remote_couchdb + 'chauves_souris_non_invasives_astre' + debug, {skip_setup: true});
					
					localDB2.sync(remoteDB).on('complete', (info) => { 
						var andAdd = document.getElementById("andAdd");
					  	if (andAdd.checked == true) {
					  	  window.location = 'new_bat_non_invasives_astre_add.html';
					  	} else {
					  	  window.location = 'bat_non_invasives_astre.html';	
					  	};
					}).on('error', function (err) {
						// error while replicating
						alert('alert sync new bat non invasives cirad: ' + JSON.stringify(err));
						window.location = 'login.html';
					});
				} else {
					var andAdd = document.getElementById("andAdd");
				  	if (andAdd.checked == true) {
				  	  window.location = 'new_bat_non_invasives_astre_add.html';
				  	} else {
				  	  window.location = 'bat_non_invasives_astre.html';	
				  	};
				};
				
				l.stop();
				//console.log(doc);
				
			}).catch(function (err) {
				alert(JSON.stringify(err));
				console.log(err);
			});	
  		};
  		
	</script>
	
	<script type="text/javascript">	
	
		$('#addEchantillon').click(function(e){
		   	e.preventDefault();
		   	var table = $('#example').DataTable();
		   	var rowCount= table.rows().data().length;
		   	addRow(table, rowCount + 1);
		});
		
		$(document).on('click', ".deletebtn", function (e) {
	    	e.preventDefault();
	    	var table = $('#example').DataTable();
	    	table.row($(this).parents('tr')).remove().draw();
	    });	
	
	</script>
	
	<script type="text/javascript">	
	
		$(document).ready(function() {			
			var table = $('#example').DataTable({
				columns: [
					{ data: null, render: 'N_identification_echantillon', width: '20%'},					
					{ data: null, render: 'Type_echantillon', width: '35%'},
					{ data: null, render: 'Nbre_feces_par_tube', width: '5%'},
			        { data: null, render: 'Urine_methode', width: '25%'},
					{ data: null, render: 'Urine_papier_buvard_nbre_cercles', width: '10%'},
			        { data: null, render: 'Action', width: '5%'}
			    ],
			    language: {
	                url: 'plug-ins/i18n/French.lang.json'
			    }
			});		
		});
		
		function addRow(table, id) {
			table.row.add(new Bat_non_invasives(
				'<div class="form-group">' +
					'<input id="N_identification_echantillon' + id + '" type="text" class="form-control" placeholder="Identification" value="" required >' +
					'<div class="invalid-feedback">' +
						'Numéro d\'identification de l\'échantillon !' +
					'</div>' +
				'</div>',
				'<div class="form-group">' +
					'<div class="input-group">' +
						'<select id="Type_echantillon' + id + '" class="form-control" required>' +
							'<option></option>' +
							'<option>Feces_RNAl</option>' +
							'<option>Feces_Ethanol</option>' + 
							'<option>Urine</option>' + 
							'<option>Guano</option>' +
							'<option>Culture_feces_glycerol</option>' +
							'<option>Manquant</option>' +                 
						'</select>' +
						'<div class="invalid-feedback">' +
							'S\'il vous plaît fournir le type !' +
						'</div>' + 
					'</div>' +
				'</div>',
				'<div class="form-group">' +
					'<input id="Nbre_feces_par_tube' + id + '" type="text" class="form-control" placeholder="Nb de fèces par tube" value="" >' +
				'</div>',
				'<div class="form-group">' +
					'<div class="input-group">' +
						'<select id="Urine_methode' + id + '" class="form-control" required>' +
							'<option></option>' +
							'<option>Tube</option>' +
							'<option>Papier_buvard</option>' +           
							'<option>Manquant</option>' +                   
						'</select>' +
						'<div class="invalid-feedback">' +
							'Urine méthode collecte !' +
						'</div>' +
					'</div>' +
				'</div>',
				'<div class="form-group">' +
					'<input id="Urine_papier_buvard_nbre_cercles' + id + '" type="text" class="form-control" placeholder="Urine papier buvard" value="" >' +
				'</div>',
				'<div class="form-group">' +
					'<button id="deleteEchantillon" class="btn btn-danger btn-sm deletebtn">' +
						'<span class="fa fa-minus"></span>' +
					'</button>' +
				'</div>'
			));

			//move added row to desired index (here the row we clicked on)
			var index = 0,
				rowCount = table.data().length-1,
				insertedRow = table.row(rowCount).data(),
				tempRow,
				input_N_identification_echantillon,
				select_Type_echantillon,
				input_Nbre_feces_par_tube,
				select_Urine_methode,
				input_Urine_papier_buvard_nbre_cercles;
			
			for (var i=rowCount;i>index;i--) {
				tempRow = table.row(i-1).data();
				
				input_N_identification_echantillon = table.cell(i-1,0).nodes().to$().find('input').val();
		    	select_Type_echantillon = table.cell(i-1,1).nodes().to$().find('select').val();
		    	input_Nbre_feces_par_tube = table.cell(i-1,2).nodes().to$().find('input').val();
		    	select_Urine_methode = table.cell(i-1,3).nodes().to$().find('select').val();
		    	input_Urine_papier_buvard_nbre_cercles = table.cell(i-1,4).nodes().to$().find('input').val();
				
				table.row(i).data(tempRow);
				table.cell(i,0).nodes().to$().find('input').val(input_N_identification_echantillon);
		    	table.cell(i,1).nodes().to$().find('select').val(select_Type_echantillon);
		    	table.cell(i,2).nodes().to$().find('input').val(input_Nbre_feces_par_tube);
		    	table.cell(i,3).nodes().to$().find('select').val(select_Urine_methode);
				table.cell(i,4).nodes().to$().find('input').val(input_Urine_papier_buvard_nbre_cercles);
					
				table.row(i-1).data(insertedRow);
			};

			    	
			//refresh the current page
			table.page(0).draw(false);
			document.getElementById('N_identification_echantillon' + id).focus();
		};
	
		function Bat_non_invasives(N_identification_echantillon, Type_echantillon, Nbre_feces_par_tube, Urine_methode, Urine_papier_buvard_nbre_cercles, Action) {
		    this._N_identification_echantillon = N_identification_echantillon;
		    this._Type_echantillon = Type_echantillon;					
		    this._Nbre_feces_par_tube = Nbre_feces_par_tube;
		    this._Urine_methode = Urine_methode;
		    this._Urine_papier_buvard_nbre_cercles = Urine_papier_buvard_nbre_cercles;
		    this._Action = Action;
		    		    
		    this.N_identification_echantillon = function() {
		        return this._N_identification_echantillon;
		    };
		    
		    this.Type_echantillon = function() {
		        return this._Type_echantillon;
		    };
		    
		    this.Nbre_feces_par_tube  = function () {
		    	return this._Nbre_feces_par_tube;
		    };
		 
		    this.Urine_methode = function () {
		        return this._Urine_methode;
		    };	
		    
		    this.Urine_papier_buvard_nbre_cercles = function () {
		        return this._Urine_papier_buvard_nbre_cercles;
		    };
		    
		    this.Action = function () {
		        return this._Action;
		    };
		};
		
		function addEchantillon(N_identification_echantillonX, Type_echantillonX, Nbre_feces_par_tubeX, Urine_methodeX, Urine_papier_buvard_nbre_cerclesX) {
		    this.N_identification_echantillon = N_identification_echantillonX;
		    this.Type_echantillon = Type_echantillonX
		    this.Nbre_feces_par_tube = Nbre_feces_par_tubeX;
		    this.Urine_methode = Urine_methodeX;
		    this.Urine_papier_buvard_nbre_cercles = Urine_papier_buvard_nbre_cerclesX;
		    	    
		    this.Type_echantillonX = function() {
		        return this.Type_echantillon;
		    };
		    
		    this.N_identification_echantillonX = function() {
		        return this.N_identification_echantillon;
		    };
		    
		    this.Nbre_feces_par_tubeX = function() {
		        return this.Nbre_feces_par_tube;
		    };
		    
		    this.Urine_methodeX = function() {
		        return this.Urine_methode;
		    };
		    
		    this.Urine_papier_buvard_nbre_cerclesX = function() {
		        return this.Urine_papier_buvard_nbre_cercles;
		    };
		    
		};
		
	</script>	
		
  </body>
</html>
	 